CREATE DATABASE QuanLyBanMayTinh
GO

USE QuanLyBanMayTinh
GO

CREATE TABLE NHANVIEN
(
	MANV		NVARCHAR(50) NOT NULL PRIMARY KEY,
	TENNV		NVARCHAR(50),
	NGAYSINH	DATETIME,
	GIOITINH	NCHAR(10),
	DIACHI		NVARCHAR(MAX),
	SDT			NVARCHAR(50)
)
GO

CREATE TABLE KHACHHANG
(
	MAKH		NVARCHAR(50) NOT NULL PRIMARY KEY,
	TENKH		NVARCHAR(50),
	NGAYSINH	DATETIME,
	GIOITINH	NCHAR(10),
	DIACHI		NVARCHAR(MAX),
	SDT			NVARCHAR(50)
)
GO

CREATE TABLE TAIKHOAN
(
	TENTK		NVARCHAR(50) NOT NULL PRIMARY KEY,
	MATKHAU		NVARCHAR(50),
	TEN			NVARCHAR(50),
	QUYEN		NCHAR(10),
	MANV		NVARCHAR(50)
)
GO

CREATE TABLE NHACUNGCAP
(
	MANCC		NVARCHAR(50) NOT NULL PRIMARY KEY,
	TENNCC		NVARCHAR(50)
)
GO

CREATE TABLE HANGHOA
(
	MAHH		NVARCHAR(50) NOT NULL PRIMARY KEY,
	MANCC		NVARCHAR(50),
	TENHANG		NVARCHAR(50),
	SOLUONG		INT,
	DONGIANHAP	INT,
	DONGIABAN	INT
)
GO

CREATE TABLE HOADON
(
	MAHD		NVARCHAR(50) NOT NULL PRIMARY KEY,
	MANV		NVARCHAR(50),
	NGAYBAN		DATETIME,
	MAKH		NVARCHAR(50),
	MAHH		NVARCHAR(50),
	SOLUONG		INT,
	DONGIA		INT,
	THANHTIEN	INT
)
GO

ALTER TABLE TAIKHOAN ADD FOREIGN KEY(MANV) REFERENCES NHANVIEN(MANV)
GO

ALTER TABLE HANGHOA ADD FOREIGN KEY(MANCC) REFERENCES NHACUNGCAP(MANCC)
GO

ALTER TABLE HOADON ADD FOREIGN KEY(MANV) REFERENCES NHANVIEN(MANV)
GO

ALTER TABLE HOADON ADD FOREIGN KEY(MAKH) REFERENCES KHACHHANG(MAKH)
GO

ALTER TABLE HOADON ADD FOREIGN KEY(MAHH) REFERENCES HANGHOA(MAHH)
GO


SET DATEFORMAT DMY
INSERT INTO NHANVIEN
VALUES	(N'1', N'Trần Văn Trung', '07/05/2002', N'Nam', N'TP HCM', N'123456789'),
		(N'2', N'Nguyễn Minh Dương', '25/10/1998', N'Nam', N'Hà Nội', N'0363440903'),
		(N'3', N'Lưu Quang Thắng', '03/09/1999', N'Nam', N'Đà Nẵng', N'5487895243')
GO

INSERT INTO KHACHHANG
VALUES	(N'1', N'Phạm Thị Ninh Ngọc', '04/02/1999', N'Nữ', N'Quy Nhơn', N'0123456789'),
		(N'2', N'Nguyễn Biền', '02/10/1997', N'Nam', N'Gia Lai', N'1485467521'),
		(N'3', N'Cao Thị Kiều', '30/9/2003', N'Nữ', N'Bình Định', N'3546978521'),
		(N'4', N'Trường An Hậu', '12/10/2001', N'Nữ', N'Đà Lạt', N'0132402543'),
		(N'5', N'Lý Thiên Nhân', '10/06/2000', N'Nam', N'Bến Tre', N'0908540245')
GO

INSERT INTO TAIKHOAN
VALUES	(N'admin', N'123', N'DUY', '1', NULL),
		(N'nhanvien', N'123', N'Trung', '1', N'1')
GO

INSERT INTO NHACUNGCAP
VALUES	(1, N'ASUS'),
		(2, N'DELL'),
		(3, N'ACER'),
		(4, N'LENOVO'),
		(5, N'HP'),
		(6, N'MSI')
GO

INSERT INTO HANGHOA
VALUES	(N'1', N'1', N'Laptop MSI Modern 14 B11MOU 1033VN', 15, 100000, 150000),
		(N'2', N'2', N'Laptop Asus ZenBook 14 Flip OLED i7', 15, 150000, 200000),
		(N'3', N'3', N'Laptop Lenovo Ideapad 5 Pro 14IAP7', 20, 200000, 250000),
		(N'4', N'2', N'Laptop Dell XPS 17 9700 Silver', 25, 250000, 300000)
GO

INSERT INTO HOADON
VALUES	(N'1', N'1', '11/06/2022', N'1', N'3', 5, 120000, 600000),
		(N'2', N'2', '11/01/2022', N'1', N'3', 10, 120000, 1200000),
		(N'3', N'3', '08/10/2022', N'2', N'2', 15, 120000, 1800000),
		(N'5', N'3', '24/09/2022', N'2', N'4', 25, 120000, 3000000)
GO